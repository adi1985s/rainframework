<!DOCTYPE html>
<html lang="en">
<head>
    <title>Rain Framework - Download</title>
    <link id="page_favicon" href="assets/favicon.ico" rel="icon" type="image/x-icon"/>
    <link rel="stylesheet" href="assets/css/style.css" type="text/css"/>
    <script src="http://www.rainframework.com/inc/js/jquery/jquery.min.js.pagespeed.jm.fJ_6UN6xpQ.js" type="text/javascript"></script>
    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-52757539-4']);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();var ajaxurl='http://www.rainframework.com/index.server.php';</script></head>
<body>

<div id="header">
    <div id="menu">
        <div>
            <a href="/rainframework"><img src="assets/img/logo_mini.png"></a>
            <a href="/rainframework">Home</a>
            <a href="FAQ.html">FAQ</a>
            <a href="Download.html">Download</a>
            <a href="Documentation.html" class="selected">Documentation</a>
            <a href="Credits.html">Credits</a>
        </div>
    </div>
    <div id="logo">
        <a href="/">
            <img src="assets/img/logo.png" alt="logo">
        </a>
    </div>
</div>

<!-- content -->

<div id="section" class="doc">
    <div id="section_inside">
        <div id="section_inside_inside">

            <div class="documentation">
                <h1>Documentation</h1>

                <div class="documentation_list">
                    <div class="doc_index">
                        <h2  class="section_title">Documentation Index</h2>
                        <ul>
                            <li><a href="#requisites">Requisites</a></li>
                            <li><a href="#installation">Installation</a></li>
                            <li><a href="#folders">Folders</a></li>
                            <li><a href="#url">URLs</a></li>
                            <li><a href="#db">DB</a></li>
                            <li><a href="#view">View</a></li>
                            <li><a href="#form">Form</a></li>
                            <li><a href="#helpers">Helpers</a></li>
                        </ul>
                    </div>
                </div>

                <div class="documentation_content">

                    <!-- section Basic -->

                        <div class="paragraph">
                            <a name="requisites"><h2>Requisites</h2></a>
                            <p>PHP 5 or newer, recommended PHP 5.4+. Any database compatible with your PDO drivers.</p>
                        </div>

                        <div class="paragraph">
                            <a name="installation"><h2>Installation</h2></a>
                            <p>

                                Installing Rain Framework is easy:<ul>

                            <li><a href="Download.html">Download</a> and uncompress the zip file</li>
                            <li>copy it in your web folder</li>
                            <li>check it with your browser, http://localhost/rainframework/</li>
                            <li>configure database and settings in website/application/config/</li>

                            </p>
                        </div>

                        <div class="paragraph">
                            <a name="folders"><h2>Folders</h2></a>
                            <p>Rain Framework is designed to work in any environment, like shared hosting, VPS, and for any situation, because you can easily configure your folders structure</p>
                            <p><img src="assets/img/folders.png" width="250px"></p>

                            <p></p>
                            <p>You can configure the Rain Framework folders structure by updating your configuration in the configuration file website/config/directory.php</p>

                            <table bgcolor="#cccccc" cellpadding="5" cellspacing="1">
                                <tbody>
                                <tr>
                                    <td bgcolor="#eeeeee" width="150">Constant</td>
                                    <td bgcolor="#eeeeee" width="100">Default</td>
                                    <td bgcolor="#eeeeee">Description</td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">SCRIPT_NAME</td>
                                    <td bgcolor="#f9f9f9">index.php or ajax.php</td>
                                    <td bgcolor="#f9f9f9">take the name of the called script<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">BASE_DIR</td>
                                    <td bgcolor="#f9f9f9">root directory</td>
                                    <td bgcolor="#f9f9f9">take the root directory of your project<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#fcfcfc">CONSTANTS_DIR</td>
                                    <td bgcolor="#fcfcfc">Rain/const/</td>
                                    <td bgcolor="#fcfcfc">constants directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#fcfcfc">LANGUAGE_DIR</td>
                                    <td bgcolor="#fcfcfc">Rain/language/</td>
                                    <td bgcolor="#fcfcfc">language directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">LIBRARY_DIR</td>
                                    <td bgcolor="#f9f9f9">Rain/library/</td>
                                    <td bgcolor="#f9f9f9">library directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#fcfcfc">CACHE_DIR</td>
                                    <td bgcolor="#fcfcfc">website/cache/</td>
                                    <td bgcolor="#fcfcfc">cache directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#fcfcfc">CONFIG_DIR</td>
                                    <td bgcolor="#fcfcfc">website/config/</td>
                                    <td bgcolor="#fcfcfc">config directory, each website has its own</td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">LOG_DIR</td>
                                    <td bgcolor="#f9f9f9">website/log/</td>
                                    <td bgcolor="#f9f9f9">log directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">UPLOADS_DIR</td>
                                    <td bgcolor="#f9f9f9">website/uploads/</td>
                                    <td bgcolor="#f9f9f9">upload directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#fcfcfc">CSS_DIR</td>
                                    <td bgcolor="#fcfcfc">website/css/</td>
                                    <td bgcolor="#fcfcfc">stylesheet directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#fcfcfc">JAVASCRIPT_DIR</td>
                                    <td bgcolor="#fcfcfc">website/js/</td>
                                    <td bgcolor="#fcfcfc">javascript directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">APPLICATION_DIR</td>
                                    <td bgcolor="#f9f9f9">application/<br></td>
                                    <td bgcolor="#f9f9f9">you develop your application</td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">CONTROLLERS_DIR</td>
                                    <td bgcolor="#f9f9f9">application/controllers/<br></td>
                                    <td bgcolor="#f9f9f9">controller directory</td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">MODELS_DIR</td>
                                    <td bgcolor="#f9f9f9">application/models/<br></td>
                                    <td bgcolor="#f9f9f9">models directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">VIEWS_DIR</td>
                                    <td bgcolor="#f9f9f9">application/views/<br></td>
                                    <td bgcolor="#f9f9f9">views directory<br></td>
                                </tr>
                                <tr>
                                    <td bgcolor="#f9f9f9">APPLICATION_LIBRARY_DIR</td>
                                    <td bgcolor="#f9f9f9">application/library/</td>
                                    <td bgcolor="#f9f9f9">Library specific for the application goes here<br></td>
                                </tr>
                                </tbody>
                            </table>

                        </div>

                        <div class="paragraph">
                            <a name="url"><h2>URLs</h2></a>
                            <p>Rain Framework uses simple URLs to access the controllers:</p>

                            <div class="template">example.com/index.php/Controller/Action/Parameters/</div>
                            <p>
                                <b>Controller</b>, select the controller class<br>
                                <b>Action</b>, select the controller method<br>
                                <b>Parameters</b> passed to the selected function, there can be more than one.<br>
                            </p>
                            <p>You can change the URI management by .htaccess file, by changing the configuration of config/route.php, or either by extending the Loader class and overriding the init_route() method.</p>
                            <p>In Rain Framework GET and POST parameters are always enabled, is anyway advised to avoid the use of them to create cleaner URI.</p>
                        </div>

                        <div class="paragraph">
                            <a name="db"><h2>DB</h2></a>
                            <p>
                                DB is the database manager class. It is a wrapper class for PDO, which allows to connect to different database.
                            </p>

                            <h3>Install</h3>
                            <p>Configure the file application/config/db.php with the database account info and call the init function:</p>
                            <div class="php">DB::init()</div>

                            <h3>Query</h3>
                            <p>Use the query method only for write/update/delete operations. You can pass the parameter as associative array or either as a single value</p>
                            <div class="php">db::query("UPDATE user SET name='Rain' WHERE user_id=?", array(1) );</div>

                            <h3>Get Field</h3>
                            <p>Get the selected field into the query</p>
                            <div class="php">$name = db::get_field("SELECT name FROM user WHERE user_id=?", array(1) );</div>

                            <h3>Get Row</h3>
                            <p>Read a row from database, and return an array. You can pass the parameter of the query into an associative array.</p>
                            <div class="php">// it return array('user_id'=>1,'name'=>'Yoda', 'age'=>900 );<br>
                                $user = db::get_row("SELECT * FROM user WHERE user_id=:user_id", array("user_id" => 1 ) );</div>

                            <h3>Get List</h3>
                            <p>Return an array of rows. The result of the get_ist can be assigned to the template</p>
                            <div class="php">$user_list = db::get_all("SELECT * FROM user WHERE color=?", array("red") );<br>
                                $view = new View;<br>
                                $view->assign("user_list", $user_list );</div>
                            <p>You can also get the results indexed by key, or as associative array key/value</p>
                            <div class="php">
                                $user_list = $db->get_all("SELECT * FROM user WHERE color=?", array('yellow'), "user_id" );<br>
                                $user_list = $db->get_all("SELECT * FROM user WHERE color=?", array('blue'), "user_id", "name" );
                            </div>

                            <h3>Write Query</h3>
                            <p>DB class implements insert, update and delete methods:</p>
                            <div class="php">
                                db::insert("user", array("name"=>"Boba Fett", "agency"=>"Bounty Hunter") );<br>
                                db::update("user", array("name"=>"Darth Vader", "agency"=>"Galactic Empire"), "user_id=1" );<br>
                                db::delete("user", "name='Jabba The Hutt'");
                            </div>

                            <h3>Get Last Id</h3>
                            <p>it return the last inserted id in INSERT query with the easy syntax</p>
                            <div class="php">
                                db::get_last_id();
                            </div>
                        </div>

                        <div class="paragraph">
                            <a name="view"><h2>View</h2></a>
                            <p>
                                View class and DB class works nice together:
                            </p>

                            <p><b>Example:</b></p>
<pre class="php">
    $db = DB::get_instance();
    // retrieve the news list
    $news_list = $db->get_list( "SELECT * FROM news" );

    $tpl = new View;
    $tpl->assign( "list", $news_list);
    $tpl->draw( "news_list" );
</pre>
                            <p></p><p></p>
                            <p><b>Template (Rain TPL):</b></p>
<pre class="php">
    {loop="news_list"}
        {$value.title}
        {$value.time|time_format}
        {$value.content}
    {/loop}</pre>

                        </div>

                        <div class="paragraph">
                            <a name="form"><h2>Form</h2></a>
                            <p>
                                You can use the Form class into the controller or into the model with load_library, as following example:
                            </p>

                            <p><b>Example:</b></p>
<pre class="php">
    $this->load_library("Form","form_obj");
    $this->form_obj->init_form("ajax.php");
    $this->form_obj->open_table("Your form table");
    $this->form_obj->add_hidden("variable", "value");
    $this->form_obj->add_item("text", "input_name", "name", "description", "value", "required");
    $this->form_obj->add_button();
    $this->form_obj->close_table();
    $this->draw( $ajax = true );
</pre>
                        </div>
                        <div class="go_back_up"><a href="#">Go back at the Top</a></div>

                        <div class="paragraph">
                            <a name="helpers"><h2>Helpers</h2></a>

                            <h3>Input</h3>
                            <p>
                                All user input GET and POST can be retrieved with get, post and get_post function.
                            </p>
<pre class="php">
    $id = get("id"); // get the parameter 'id'
    $id = post("business_id"); // get the post parameter
    $id = get_post("name"); // get the parameter from get and post
    $id = cookie("login"); // get the cookie

    // check the filters at http://www.php.net/manual/en/filter.filters.php
    $id = get("name", FILTER_SANITIZE_MAGIC_QUOTES );
</pre>

<h3>Benchmark</h3>
<p>
    <b>Dump</b> prints the variable structure. Used to debug array, object or mixed var.
</p>
<pre class="php">   dump( $array );</pre>

<p>
    <b>Memory_usage_start</b> and <b>memory_usage</b> track the memory usage
</p>
<pre class="php">
    memory_usage_start();
    // code code code
    echo memory_usage();
</pre>

<p>
    <b>Timer_start</b> and <b>timer</b> track the elapsed time
</p>
<pre class="php">
    timer_start();
    // code code code
    echo timer();
</pre>


<h3>Time</h3>
<p>
    <b>Time_format</b> converts timestamp to readable format. You can format the time as string with the same syntax of strftime.
</p>
<pre class="php">   time_format( $timestamp, "%d %B" ) // output: 20 December</pre>

<p>
    <b>time_elapsed</b> shows the time elapsed from timestamp
</p>
<pre class="php">
    time_elapsed(time() - 10) // output: 10 seconds ago
</pre>

<p>
    <b>sec_to_hms</b> converts seconds into hh:mm:ss format
</p>
<pre class="php">
    sec_to_hms( 60 ) // output: 00:01:00
</pre>

<p>
    <b>sec_to_string</b> converts seconds into string
</p>
<pre class="php">
    sec_to_string( 60 ) // output: 1 minute
</pre>

<h3>Template modifiers</h3>
<p>Here's the list of the template modifiers you can use with Rain TPL<p>
    <b>cut</b> cuts the text and add ... at the end of it
</p>
<pre class="template">
    {$string:cut:10} // output: Hello Worl...
</pre>

<p>
    <b>cut_html</b> cuts the text and add ... at the end of it, maintaining HTML valid
</p>
<pre class="template">
    {$html_string="Hello &gt;World&lt;"}
    {$html_string:cut_html:10} // output: Hello <b>Worl</b>...
</pre>

<p>
    <b>byte_format</b> formats bytes into a human readable byte format
</p>
<pre class="template">
    {$size=1024}
    {$size:byte_format} // output: 1KB
</pre>

<p>
    <b>format_money</b> formats money into the current currency
</p>
<pre class="template">
    {$size=1024}
    {$size:format_money} // output: $ 10,000 (for US) and 10.000 &euro; (for Europe)
</pre>



                            <h3>Others</h3>
                            <p>
                                <b>is_email</b> validate emails
                            </p>
<pre class="php">
    is_email( "raintpl@gmail.com") // output: true
</pre>
                            <p>
                                <b>dir_scan</b> returns the arrays of the directories and files inside the path
                            </p>
<pre class="php">
    dir_scan("tmp/");
</pre>

                            <p>
                                <b>file_list</b> returns the arrays of the files filtered into the path
                            </p>
<pre class="php">
    file_list("tmp/", "jpg");
</pre>

                            <p>
                                <b>dir_list</b> returns the list of directories
                            </p>
<pre class="php">
    dir_list("views/");
</pre>


<p>
    <b>file_ext</b> returns the extention of a file
</p>
<pre class="php">
    file_ext("logo.jpg"); // output: .jpg
</pre>

<p>
    <b>dir_copy</b> copy a folder and recursively all its content
</p>
<pre class="php">
    dir_copy("views/template1", "views/template2");
</pre>

<p>
    <b>image_resize</b> resize an image
</p>
<pre class="php">
    image_resize($source, $destination, $width, $height);
</pre>


                        </div>

                    </div>
                    <!-- section Helper -->


                </div>

            </div>
        </div>
    </div>
</div>

<!-- /content -->


<div id="footer">
    <div id="inner_footer">
        <div class="left">
            <a href="/rainframework">Home</a> |
            <a href="FAQ.html">FAQ</a> |
            <a href="Download.html">Download</a> |
            <a href="Documentation.html">Documentation</a> |
            <a href="Credits.html">Credits</a>
        </div>
        <div class="center">Copyright Rain Framework</div>
        <div class="right">
            <a href="https://twitter.com/feulf" target="_blank">My Twitter</a>
        </div>
    </div>
</div>




</body>
</html>
